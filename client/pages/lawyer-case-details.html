<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>פרטי תיק | Legal Bridge</title>
  <link rel="stylesheet" href="../css/lawyer-case-details.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
  <!-- Background Animation -->
  <div class="bg-animation">
    <div class="floating-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
      <div class="shape shape-5"></div>
    </div>
  </div>

  <div class="container">
    <!-- Header Section -->
    <div class="header-section">
      <a href="lawyer-cases.html" class="back-link">
        <i class="bi bi-arrow-right"></i>
        <span>חזרה לניהול תיקים</span>
      </a>
      
      <div class="page-title">
        <h1>
          <i class="bi bi-folder-open"></i>
          <span>פרטי תיק</span>
        </h1>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- Client Info Card -->
      <div id="client-info" class="info-card client-card">
        <div class="card-header">
          <i class="bi bi-person-circle"></i>
          <h3>פרטי לקוח</h3>
        </div>
        <div class="card-content">
          <!-- Content will be loaded dynamically -->
        </div>
      </div>

      <!-- Case Details Card -->
      <div id="case-details" class="info-card case-card">
        <div class="card-header">
          <i class="bi bi-file-text"></i>
          <h3>פרטי התיק</h3>
        </div>
        <div class="card-content">
          <!-- Content will be loaded dynamically -->
        </div>
      </div>
    </div>

    <!-- Progress Updates Section -->
    <div class="progress-section">
      <div class="section-header">
        <h2>
          <i class="bi bi-clock-history"></i>
          <span>עדכוני התקדמות</span>
        </h2>
        <button class="add-progress-btn" onclick="showAddProgressForm()">
          <i class="bi bi-plus-circle"></i>
          <span>הוסף עדכון התקדמות</span>
        </button>
      </div>
      <div id="progress-timeline" class="progress-timeline">
        <!-- Progress items will be loaded here -->
      </div>
    </div>

    <!-- Subcases Section -->
    <div class="subcases-section">
      <div class="section-header">
        <h2>
          <i class="bi bi-folder2-open"></i>
          <span>תתי-תיקים</span>
        </h2>
        <button class="add-subcase-btn" onclick="addSubcase()">
          <i class="bi bi-plus-circle"></i>
          <span>הוסף תת-תיק</span>
        </button>
      </div>
      <div id="subcases-container" class="subcases-grid"></div>
    </div>
  </div>

  <!-- Add Progress Modal -->
  <div id="add-progress-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>הוסף עדכון התקדמות</h3>
        <button class="close-modal" onclick="hideAddProgressForm()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>כותרת העדכון</label>
          <input type="text" id="progress-title" placeholder="לדוגמה: הוגש כתב תביעה לבית המשפט">
        </div>
        <div class="input-group">
          <label>תיאור מפורט</label>
          <textarea id="progress-description" placeholder="תיאור מפורט של העדכון..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="submit-btn" onclick="submitProgress()">
          <i class="bi bi-check-circle"></i>
          <span>שמור עדכון</span>
        </button>
        <button class="cancel-btn" onclick="hideAddProgressForm()">
          <i class="bi bi-x-circle"></i>
          <span>ביטול</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="edit-modal-title">עריכה</h3>
        <button class="close-modal" onclick="hideEditModal()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label id="edit-label">שם</label>
          <input type="text" id="edit-input" placeholder="הכנס שם חדש">
        </div>
      </div>
      <div class="modal-footer">
        <button class="submit-btn" onclick="submitEdit()">
          <i class="bi bi-check-circle"></i>
          <span>שמור</span>
        </button>
        <button class="cancel-btn" onclick="hideEditModal()">
          <i class="bi bi-x-circle"></i>
          <span>ביטול</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="spinner"></div>
    <p>טוען נתונים...</p>
  </div>

  <!-- Success Toast -->
  <div id="success-toast" class="toast success-toast">
    <i class="bi bi-check-circle"></i>
    <span>הפעולה בוצעה בהצלחה!</span>
  </div>
  
  <input id="hidden-file-input" type="file" accept=".pdf,.png,.jpg,.jpeg,.doc,.docx" style="display:none" />
  <script src="../js/lawyer-case-details.js"></script>
</body>
</html>