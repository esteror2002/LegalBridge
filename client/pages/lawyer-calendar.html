<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>יומן אישי משופר | Legal Bridge</title>
  <link rel="stylesheet" href="../css/lawyer-calendar.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
  <!-- Background Animation -->
  <div class="bg-animation">
    <div class="floating-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
      <div class="shape shape-5"></div>
    </div>
  </div>

  <div class="layout-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="profile-section">
          <div class="profile-avatar">
            <i class="bi bi-person-circle"></i>
          </div>
          <h2 id="greeting">שלום</h2>
        </div>
        
        <div class="header-actions">
          <button class="logout-btn" onclick="logout()">
            <i class="bi bi-box-arrow-right"></i>
            <span>התנתקות</span>
          </button>
        </div>
      </div>

      <nav class="lawyer-options">
        <ul>
          <li>
            <a href="lawyer-home.html" class="nav-item">
              <div class="nav-icon">
                <i class="bi bi-house"></i>
              </div>
              <span>עמוד הבית</span>
              <div class="nav-arrow">
                <i class="bi bi-chevron-left"></i>
              </div>
            </a>
          </li>
          <li>
            <a href="lawyer-profile.html" class="nav-item">
              <div class="nav-icon">
                <i class="bi bi-person"></i>
              </div>
              <span>אזור אישי</span>
              <div class="nav-arrow">
                <i class="bi bi-chevron-left"></i>
              </div>
            </a>
          </li>
          <li>
            <a href="lawyer-calendar.html" class="nav-item">
              <div class="nav-icon">
                <i class="bi bi-calendar-week"></i>
              </div>
              <span>יומן אישי</span>
              <div class="nav-arrow">
                <i class="bi bi-chevron-left"></i>
              </div>
            </a>
          </li>
          <li>
            <a href="clients-list.html" class="nav-item">
              <div class="nav-icon">
                <i class="bi bi-people"></i>
              </div>
              <span>צפייה בלקוחות</span>
              <div class="nav-arrow">
                <i class="bi bi-chevron-left"></i>
              </div>
            </a>
          </li>
          <li>
            <a href="lawyer-requests.html" class="nav-item">
              <div class="nav-icon">
                <i class="bi bi-envelope"></i>
              </div>
              <span>דואר</span>
              <div class="nav-arrow">
                <i class="bi bi-chevron-left"></i>
              </div>
            </a>
          </li>
          <li>
            <a href="lawyer-cases.html" class="nav-item">
              <div class="nav-icon">
                <i class="bi bi-folder"></i>
              </div>
              <span>ניהול תיקים</span>
              <div class="nav-arrow">
                <i class="bi bi-chevron-left"></i>
              </div>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="content-header">
        <h1 class="main-title">
          <i class="bi bi-calendar-week"></i>
          <span class="title-text">היומן האישי המתקדם שלי</span>
        </h1>
        <p class="subtitle">נהל את הפגישות, התזכורות והיעדים היומיים שלך עם תכונות מתקדמות</p>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions" id="quick-actions">
        <div class="quick-action-card" onclick="quickAddMeeting()">
          <i class="bi bi-person-plus quick-action-icon" style="color: #3498db;"></i>
          <h4>פגישה עם לקוח</h4>
          <p>הוסף פגישה מהירה</p>
        </div>
        <div class="quick-action-card" onclick="quickAddCourtDate()">
          <i class="bi bi-building quick-action-icon" style="color: #e74c3c;"></i>
          <h4>דיון בבית משפט</h4>
          <p>תזמן דיון חדש</p>
        </div>
        <div class="quick-action-card" onclick="quickAddDeadline()">
          <i class="bi bi-alarm quick-action-icon" style="color: #f39c12;"></i>
          <h4>דדליין חשוב</h4>
          <p>הגדר תאריך יעד</p>
        </div>
        <div class="quick-action-card" onclick="showAnalytics()">
          <i class="bi bi-graph-up quick-action-icon" style="color: #2ecc71;"></i>
          <h4>ניתוח זמנים</h4>
          <p>צפה בדוחות</p>
        </div>
      </div>

      <!-- Calendar Controls -->
      <div class="calendar-controls">
        <div class="view-selector">
          <button class="view-btn active" data-view="month" onclick="changeView('month')">
            <i class="bi bi-calendar-month"></i>
            <span>חודש</span>
          </button>
          <button class="view-btn" data-view="week" onclick="changeView('week')">
            <i class="bi bi-calendar-week"></i>
            <span>שבוע</span>
          </button>
          <button class="view-btn" data-view="day" onclick="changeView('day')">
            <i class="bi bi-calendar-day"></i>
            <span>יום</span>
          </button>
          <button class="view-btn" data-view="agenda" onclick="changeView('agenda')">
            <i class="bi bi-list-ul"></i>
            <span>סדר יום</span>
          </button>
        </div>

        <div class="calendar-navigation">
          <button class="nav-btn" onclick="previousPeriod()">
            <i class="bi bi-chevron-right"></i>
          </button>
          <h2 id="current-period">דצמבר 2024</h2>
          <button class="nav-btn" onclick="nextPeriod()">
            <i class="bi bi-chevron-left"></i>
          </button>
        </div>

        <div class="calendar-actions">
          <button class="today-btn" onclick="goToToday()">
            <i class="bi bi-calendar-check"></i>
            <span>היום</span>
          </button>
          <button class="add-event-btn" onclick="showAddEventModal()">
            <i class="bi bi-plus-circle"></i>
            <span>הוסף אירוע</span>
          </button>
          <button class="export-btn" onclick="exportCalendar()">
            <i class="bi bi-download"></i>
            <span>ייצא</span>
          </button>
          <button class="import-btn" onclick="importCalendar()">
            <i class="bi bi-upload"></i>
            <span>ייבא</span>
          </button>
        </div>
      </div>

      <!-- Calendar Grid -->
      <div class="calendar-container">
        <div id="calendar-view" class="calendar-grid">
          <!-- Calendar will be generated here -->
        </div>
      </div>

      <!-- Today's Tasks -->
      <div class="tasks-section">
        <div class="section-header">
          <h3>
            <i class="bi bi-check-circle"></i>
            <span>משימות להיום</span>
          </h3>
          <div>
            <button class="add-task-btn" onclick="showAddTaskModal()">
              <i class="bi bi-plus"></i>
              <span>הוסף משימה</span>
            </button>
          </div>
        </div>
        <div id="tasks-list" class="tasks-list">
          <!-- Tasks will be loaded here -->
        </div>
      </div>
    </main>
  </div>

  <!-- Enhanced Add Event Modal -->
  <div id="add-event-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>הוסף אירוע חדש</h3>
        <button class="close-modal" onclick="hideAddEventModal()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>כותרת האירוע</label>
          <input type="text" id="event-title" placeholder="פגישה עם לקוח...">
        </div>
        <div class="input-group">
          <label>תאריך</label>
          <input type="date" id="event-date">
        </div>
        <div class="input-group">
          <label>שעת התחלה</label>
          <input type="time" id="event-time">
        </div>
        <div class="input-group">
          <label>שעת סיום</label>
          <input type="time" id="event-end-time">
        </div>
        <div class="input-group">
          <label>מיקום</label>
          <input type="text" id="event-location" placeholder="כתובת או מיקום...">
        </div>
        <div class="input-group">
          <label>תיאור</label>
          <textarea id="event-description" placeholder="פרטים נוספים..."></textarea>
        </div>
        <div class="input-group">
          <label>סוג אירוע</label>
          <select id="event-type">
            <option value="meeting">פגישה</option>
            <option value="court">דיון בבית משפט</option>
            <option value="deadline">דדליין</option>
            <option value="reminder">תזכורת</option>
            <option value="consultation">ייעוץ</option>
            <option value="research">מחקר</option>
          </select>
        </div>
        <div class="input-group">
          <label>עדיפות</label>
          <select id="event-priority">
            <option value="low">נמוכה</option>
            <option value="medium">בינונית</option>
            <option value="high">גבוהה</option>
            <option value="urgent">דחוף</option>
          </select>
        </div>
        <div class="input-group">
          <label>
            <input type="checkbox" id="event-reminder"> 
            תזכורת 30 דקות לפני
          </label>
        </div>
        <div class="input-group">
          <label>הערות פרטיות</label>
          <textarea id="event-notes" placeholder="הערות שיוצגו רק לך..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="submit-btn" onclick="addEvent()">
          <i class="bi bi-check-circle"></i>
          <span>שמור אירוע</span>
        </button>
        <button class="cancel-btn" onclick="hideAddEventModal()">
          <i class="bi bi-x-circle"></i>
          <span>ביטול</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Enhanced Add Task Modal -->
  <div id="add-task-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>הוסף משימה חדשה</h3>
        <button class="close-modal" onclick="hideAddTaskModal()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>כותרת המשימה</label>
          <input type="text" id="task-title" placeholder="השלם מסמך...">
        </div>
        <div class="input-group">
          <label>תיאור מפורט</label>
          <textarea id="task-description" placeholder="פירוט המשימה..."></textarea>
        </div>
        <div class="input-group">
          <label>תאריך יעד</label>
          <input type="date" id="task-due-date">
        </div>
        <div class="input-group">
          <label>עדיפות</label>
          <select id="task-priority">
            <option value="low">נמוכה</option>
            <option value="medium">בינונית</option>
            <option value="high">גבוהה</option>
            <option value="urgent">דחוף</option>
          </select>
        </div>
        <div class="input-group">
          <label>קטגוריה</label>
          <select id="task-category">
            <option value="legal">עבודה משפטית</option>
            <option value="admin">ניהול</option>
            <option value="client">לקוחות</option>
            <option value="court">בית משפט</option>
            <option value="research">מחקר</option>
            <option value="personal">אישי</option>
          </select>
        </div>
        <div class="input-group">
          <label>זמן משוער (דקות)</label>
          <input type="number" id="task-duration" placeholder="60" min="5" max="480">
        </div>
      </div>
      <div class="modal-footer">
        <button class="submit-btn" onclick="addTask()">
          <i class="bi bi-check-circle"></i>
          <span>שמור משימה</span>
        </button>
        <button class="cancel-btn" onclick="hideAddTaskModal()">
          <i class="bi bi-x-circle"></i>
          <span>ביטול</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Analytics Modal -->
  <div id="analytics-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ניתוח זמנים ופרודוקטיביות</h3>
        <button class="close-modal" onclick="hideAnalyticsModal()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div id="analytics-content">
          <div class="analytics-summary">
            <div class="stat-card">
              <h4>אירועים השבוע</h4>
              <div class="stat-number" id="weekly-events">0</div>
            </div>
            <div class="stat-card">
              <h4>משימות הושלמו</h4>
              <div class="stat-number" id="completed-tasks">0</div>
            </div>
            <div class="stat-card">
              <h4>ממוצע פגישות ביום</h4>
              <div class="stat-number" id="avg-meetings">0</div>
            </div>
          </div>
          <div class="analytics-charts">
            <canvas id="productivity-chart" width="400" height="200"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Import Calendar Modal -->
  <div id="import-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ייבוא יומן</h3>
        <button class="close-modal" onclick="hideImportModal()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>בחר קובץ יומן (CSV, ICS)</label>
          <input type="file" id="import-file" accept=".csv,.ics" onchange="handleFileSelect(event)">
        </div>
        <div class="input-group">
          <label>או הדבק נתונים מיומן Google/Outlook</label>
          <textarea id="paste-calendar-data" placeholder="הדבק כאן נתונים מיומן אחר..."></textarea>
        </div>
        <div class="import-preview" id="import-preview" style="display: none;">
          <h4>תצוגה מקדימה:</h4>
          <div id="preview-content"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="submit-btn" onclick="processImport()">
          <i class="bi bi-upload"></i>
          <span>ייבא נתונים</span>
        </button>
        <button class="cancel-btn" onclick="hideImportModal()">
          <i class="bi bi-x-circle"></i>
          <span>ביטול</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Event Details Modal -->
  <div id="event-details-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="event-details-title">פרטי האירוע</h3>
        <button class="close-modal" onclick="hideEventDetailsModal()">
          <i class="bi bi-x"></i>
        </button>
      </div>
      <div class="modal-body">
        <div id="event-details-content">
          <!-- Event details will be populated here -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="submit-btn" onclick="editCurrentEvent()">
          <i class="bi bi-pencil"></i>
          <span>ערוך</span>
        </button>
        <button class="cancel-btn" onclick="deleteCurrentEvent()" style="background: #e74c3c;">
          <i class="bi bi-trash"></i>
          <span>מחק</span>
        </button>
        <button class="cancel-btn" onclick="hideEventDetailsModal()">
          <i class="bi bi-x-circle"></i>
          <span>סגור</span>
        </button>
      </div>
    </div>
  </div>

  <script src="../js/lawyer-calendar.js"></script>
</body>
</html>